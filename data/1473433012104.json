{"tag":"web","root":"1473433012104/","file_name":1473433012104,"title":"HTML 摄像头，预览本地图片","date":"2016-09-09T14:56:52.106Z","text_1":"HTML&nbsp摄像头，预览本地图片","code_2":"&lt!DOCTYPE&nbsphtml&gt<br/>&lthtml&gt<br/>&lthead&gt<br/>&nbsp&nbsp&nbsp&nbsp&lttitle&gtwebAPI&lt/title&gt<br/>&lt/head&gt<br/>&ltbody&gt<br/>&nbsp&nbsp&nbsp&nbsp&ltvideo&nbspid=\"video\"&nbspwidth=\"600px\"&nbspheight=\"400px\"&nbspsrc=\"\"&gt&lt/video&gt<br/>&nbsp&nbsp&nbsp&nbsp&ltimg&nbsp&nbspid=\"img\"&nbspsrc=\"\"&nbspwidth=\"600px\"&nbspheight=\"400px\"&nbspalt=\"\"&gt<br/>&nbsp&nbsp&nbsp&nbsp&ltinput&nbsptype=\"file\"&nbspid=\"file\"&gt<br/>&lt/body&gt<br/>&ltscript&nbspid=\"js\"&gt&nbsp<br/>var&nbspimg=document.querySelector(\"#file\");<br/>var&nbspimg=document.querySelector(\"#img\");<br/>navigator.getUserMedia&nbsp=&nbspnavigator.mozGetUserMedia&nbsp||&nbsp&nbspnavigator.webkitGetUserMedia&nbsp||&nbspnavigator.msGetUserMedia;//---兼容<br/>function&nbsponSuccess(stream)&nbsp{//---必须服务器支持<br/>&nbsp&nbsp&nbsp&nbspvar&nbspvideo&nbsp=&nbspdocument.getElementById('video');<br/>&nbsp&nbsp&nbsp&nbspif&nbsp(window.URL)&nbsp{<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvideo.src&nbsp=&nbspwindow.URL.createObjectURL(stream);//---核心<br/>&nbsp&nbsp&nbsp&nbsp}&nbspelse&nbsp{<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspvideo.src&nbsp=&nbspstream;<br/>&nbsp&nbsp&nbsp&nbsp}<br/>&nbsp&nbsp&nbsp&nbspvideo.autoplay&nbsp=&nbsptrue;<br/>}<br/>var&nbsponError=function(){<br/>&nbsp&nbsp&nbsp&nbspalert(\"错误\");<br/>}<br/>navigator.getUserMedia({//----调用，成功或失败都有回调函数<br/>&nbsp&nbsp&nbsp&nbspvideo:&nbsptrue,<br/>&nbsp&nbsp&nbsp&nbspaudio:&nbsptrue<br/>},&nbsponSuccess,&nbsponError);<br/>function&nbspshow(){//-----本地图片浏览，可以不需要服务器支持<br/>&nbsp&nbsp&nbsp&nbspvar&nbspstreams=file.files[0];<br/>&nbsp&nbsp&nbsp&nbspimg.src=window.URL.createObjectURL(streams);<br/>}<br/>&lt/script&gt<br/><br/>&lt/html&gt"}